"use strict";(self.webpackChunkanswer=self.webpackChunkanswer||[]).push([[7665],{97150:(n,e,i)=>{i.r(e),i.d(e,{assets:()=>c,contentTitle:()=>t,default:()=>h,frontMatter:()=>r,metadata:()=>d,toc:()=>o});var l=i(43010),s=i(90887);const r={slug:"/development/plugins"},t="\u63d2\u4ef6\u5f00\u53d1\u6307\u5357",d={id:"development/plugins/plugin",title:"\u63d2\u4ef6\u5f00\u53d1\u6307\u5357",description:"Plugins are a way to extend the functionality of the Answer project. You can create your own plugins to meet your own needs.",source:"@site/i18n/zh-CN/docusaurus-plugin-content-docs/current/development/plugins/plugin.md",sourceDirName:"development/plugins",slug:"/development/plugins",permalink:"/zh-CN/docs/development/plugins",draft:!1,unlisted:!1,editUrl:"https://crowdin.com/project/answer-website/zh-CN",tags:[],version:"current",lastUpdatedBy:"robin",lastUpdatedAt:1764473699,formattedLastUpdatedAt:"2025\u5e7411\u670830\u65e5",frontMatter:{slug:"/development/plugins"},sidebar:"docs",previous:{title:"Development Guide",permalink:"/zh-CN/docs/development"},next:{title:"Plugin Configuration Schema",permalink:"/zh-CN/docs/development/plugins/plugin-config"}},c={},o=[{value:"Introduction",id:"introduction",level:2},{value:"Plugin template types",id:"plugin-template-types",level:3},{value:"Plugin type",id:"plugin-type",level:3},{value:"\u521b\u5efa\u63d2\u4ef6",id:"\u521b\u5efa\u63d2\u4ef6",level:2},{value:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09",id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350",level:3},{value:"\u624b\u52a8\u521b\u5efa",id:"\u624b\u52a8\u521b\u5efa",level:3},{value:"\u8fd0\u884c\u63d2\u4ef6",id:"\u8fd0\u884c\u63d2\u4ef6",level:2},{value:"\u5b89\u88c5\u63d2\u4ef6\uff08\u81ea\u52a8\u5316 - \u63a8\u8350\uff09",id:"\u5b89\u88c5\u63d2\u4ef6\u81ea\u52a8\u5316---\u63a8\u8350",level:3},{value:"\u5217\u51fa\u63d2\u4ef6",id:"\u5217\u51fa\u63d2\u4ef6",level:3},{value:"\u5378\u8f7d\u63d2\u4ef6",id:"\u5378\u8f7d\u63d2\u4ef6",level:3},{value:"\u8fd0\u884c\u540e\u7aef\u63d2\u4ef6",id:"\u8fd0\u884c\u540e\u7aef\u63d2\u4ef6",level:3},{value:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09",id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350-1",level:4},{value:"\u624b\u52a8\u5b89\u88c5",id:"\u624b\u52a8\u5b89\u88c5",level:4},{value:"\u8fd0\u884c\u6807\u51c6 UI \u63d2\u4ef6",id:"\u8fd0\u884c\u6807\u51c6-ui-\u63d2\u4ef6",level:3},{value:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09",id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350-2",level:4},{value:"\u624b\u52a8\u5b89\u88c5",id:"\u624b\u52a8\u5b89\u88c5-1",level:4},{value:"Backend Plugin Development",id:"backend-plugin-development",level:2},{value:"Implement the Base interface",id:"implement-the-base-interface",level:3},{value:"Implement the function interface",id:"implement-the-function-interface",level:3},{value:"Implement the configuration interface",id:"implement-the-configuration-interface",level:3},{value:"Register initialization function",id:"register-initialization-function",level:3},{value:"Standard UI plugin Development",id:"standard-ui-plugin-development",level:2},{value:"Editor plugin",id:"editor-plugin",level:3},{value:"Route plugin",id:"route-plugin",level:3},{value:"Captcha plugin",id:"captcha-plugin",level:3},{value:"Builtin plugin Development",id:"builtin-plugin-development",level:2},{value:"How to develop builtin plugin",id:"how-to-develop-builtin-plugin",level:3}];function a(n){const e={a:"a",admonition:"admonition",br:"br",code:"code",h1:"h1",h2:"h2",h3:"h3",h4:"h4",li:"li",ol:"ol",p:"p",pre:"pre",strong:"strong",table:"table",tbody:"tbody",td:"td",th:"th",thead:"thead",tr:"tr",ul:"ul",...(0,s.a)(),...n.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(e.h1,{id:"\u63d2\u4ef6\u5f00\u53d1\u6307\u5357",children:"\u63d2\u4ef6\u5f00\u53d1\u6307\u5357"}),"\n",(0,l.jsx)(e.p,{children:"Plugins are a way to extend the functionality of the Answer project. You can create your own plugins to meet your own needs."}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.p,{children:["\u67e5\u770b ",(0,l.jsx)(e.a,{href:"https://github.com/apache/answer-plugins",children:(0,l.jsx)(e.strong,{children:"\u5b98\u65b9\u63d2\u4ef6\u4ee3\u7801"})})," \u5c06\u5e2e\u52a9\u4f60\u5feb\u901f\u7406\u89e3\u548c\u5b66\u4e60\u63d2\u4ef6\u5f00\u53d1\u3002"]})}),"\n",(0,l.jsx)(e.admonition,{type:"info",children:(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u63a8\u8350"}),"\uff1a\u4f7f\u7528\u5b98\u65b9\u811a\u624b\u67b6\u5de5\u5177 ",(0,l.jsx)(e.a,{href:"https://www.npmjs.com/package/create-answer-plugin",children:(0,l.jsx)(e.code,{children:"create-answer-plugin"})})," \u6765\u521b\u5efa\u548c\u7ba1\u7406\u63d2\u4ef6\u3002\u5b83\u53ef\u4ee5\u81ea\u52a8\u5316\u5927\u90e8\u5206\u8bbe\u7f6e\u8fc7\u7a0b\uff0c\u5305\u62ec\u6587\u4ef6\u751f\u6210\u3001Go \u6a21\u5757\u914d\u7f6e\u548c\u63d2\u4ef6\u5b89\u88c5\u3002"]})}),"\n",(0,l.jsx)(e.h2,{id:"introduction",children:"Introduction"}),"\n",(0,l.jsx)(e.h3,{id:"plugin-template-types",children:"Plugin template types"}),"\n",(0,l.jsx)(e.p,{children:"Currently we have three types of plugins:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"Backend plugin"}),"\n",(0,l.jsx)(e.li,{children:"Standard UI plugin"}),"\n",(0,l.jsx)(e.li,{children:"Builtin plugin"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"plugin-type",children:"Plugin type"}),"\n",(0,l.jsx)(e.p,{children:"We classify plugins into different types. Different types of plugins have different functions. Plugins of the same type have the same effect, but are implemented differently."}),"\n",(0,l.jsxs)(e.table,{children:[(0,l.jsx)(e.thead,{children:(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.th,{children:"Plugin Name"}),(0,l.jsx)(e.th,{children:"Template Type"}),(0,l.jsx)(e.th,{children:"Description"})]})}),(0,l.jsxs)(e.tbody,{children:[(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Connector"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"The Connector plugin helps us to implement third-party login functionality"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Storage"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"The Storage plugin helps us to upload files to third-party storage."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Cache"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"Support for using different caching middleware."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Search"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"Support for using search engines to speed up the search for question answers."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"User Center"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"Using the third-party user system to manage users."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Notification"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"The Notification plugin helps us to send messages to third-party notification systems."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Route"}),(0,l.jsx)(e.td,{children:"Standard UI Plugin"}),(0,l.jsx)(e.td,{children:"Provides support for custom routing."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Editor"}),(0,l.jsx)(e.td,{children:"Standard UI Plugin"}),(0,l.jsx)(e.td,{children:"Supports extending the markdown editor's toolbar."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Captcha"}),(0,l.jsx)(e.td,{children:"Standard UI Plugin"}),(0,l.jsx)(e.td,{children:"Provides support for captcha."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Reviewer"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"Allows customizing the reviewer functionality."})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Filter"}),(0,l.jsx)(e.td,{children:"Backend Plugin"}),(0,l.jsx)(e.td,{children:"Filter out illegal questions or answers. (coming soon)"})]}),(0,l.jsxs)(e.tr,{children:[(0,l.jsx)(e.td,{children:"Render"}),(0,l.jsx)(e.td,{children:"Standard UI Plugin"}),(0,l.jsx)(e.td,{children:"Parsers for different content formats. (coming soon)"})]})]})]}),"\n",(0,l.jsx)(e.h2,{id:"\u521b\u5efa\u63d2\u4ef6",children:"\u521b\u5efa\u63d2\u4ef6"}),"\n",(0,l.jsxs)(e.admonition,{type:"info",children:[(0,l.jsxs)(e.p,{children:["package.json \u4e2d\u7684 ",(0,l.jsx)(e.strong,{children:"name"})," \u5b57\u6bb5\u662f\u6211\u4eec\u6dfb\u52a0\u4f9d\u8d56\u7684\u5305\u540d\uff1b\u8bf7\u4e0d\u8981\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"_"})," \u8fde\u63a5\u6b64\u5b57\u6bb5\u547d\u540d\uff0c\u8bf7\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"-"}),"\uff1b\u4f8b\u5982\uff1a"]}),(0,l.jsxs)(e.p,{children:['"editor-chart" \u2705',(0,l.jsx)(e.br,{}),"\n",'"editor_chart" \u274c']})]}),"\n",(0,l.jsx)(e.h3,{id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350",children:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09"}),"\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u63d2\u4ef6\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u5b98\u65b9\u811a\u624b\u67b6\u5de5\u5177\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u5168\u5c40\u5b89\u88c5\u5de5\u5177\uff08\u53ef\u9009\uff09\nnpm install -g create-answer-plugin\n# \u6216\npnpm add -g create-answer-plugin\n\n# \u6216\u76f4\u63a5\u4f7f\u7528 npx\uff08\u63a8\u8350\uff09\nnpx create-answer-plugin create <pluginName>\n# \u6216\u4f7f\u7528\u522b\u540d\nnpx answer-plugin create <pluginName>\n# \u6216\u4f7f\u7528\u7b80\u5316\u5f62\u5f0f\nnpx answer-plugin <pluginName>\n"})}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.strong,{children:"\u6ce8\u610f"}),"\uff1a\u5305\u540d\u662f ",(0,l.jsx)(e.code,{children:"create-answer-plugin"}),"\uff0c\u4f46\u4f60\u53ef\u4ee5\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"create-answer-plugin"})," \u6216 ",(0,l.jsx)(e.code,{children:"answer-plugin"})," \u4f5c\u4e3a\u547d\u4ee4\uff08\u4e24\u8005\u90fd\u53ef\u4ee5\u4f7f\u7528\uff01\uff09\u3002"]}),"\n",(0,l.jsx)(e.p,{children:"\u8be5\u5de5\u5177\u5c06\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"\u901a\u8fc7\u4ea4\u4e92\u5f0f\u5411\u5bfc\u5f15\u5bfc\u4f60\u9009\u62e9\u63d2\u4ef6\u7c7b\u578b"}),"\n",(0,l.jsx)(e.li,{children:"\u751f\u6210\u6240\u6709\u5fc5\u9700\u7684\u6587\u4ef6\uff0c\u5e76\u5177\u6709\u6b63\u786e\u7684\u7ed3\u6784"}),"\n",(0,l.jsx)(e.li,{children:"\u521b\u5efa Go \u5305\u88c5\u6587\u4ef6\uff08\u540e\u7aef\u63d2\u4ef6\u5fc5\u9700\uff09"}),"\n",(0,l.jsxs)(e.li,{children:["\u8bbe\u7f6e\u5305\u542b\u6240\u6709\u4f9d\u8d56\u9879\u7684 ",(0,l.jsx)(e.code,{children:"go.mod"})]}),"\n",(0,l.jsx)(e.li,{children:"\u751f\u6210\u5177\u6709\u6b63\u786e\u7ed3\u6784\u7684 i18n \u6587\u4ef6"}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879\uff1a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"pluginName"}),"\uff08\u53ef\u9009\uff09\uff1a\u9884\u586b\u5145\u63d2\u4ef6\u540d\u79f0"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"--path, -p"}),"\uff1aAnswer \u9879\u76ee\u8def\u5f84\uff08\u6839\u76ee\u5f55\uff09\u3002\u5982\u679c\u672a\u6307\u5b9a\uff0c\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\u3002"]}),"\n"]}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u793a\u4f8b\uff1a"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u5bfc\u822a\u5230\u4f60\u7684 Answer \u9879\u76ee\u6839\u76ee\u5f55\ncd /path/to/answer\n\n# \u521b\u5efa\u63d2\u4ef6\nnpx create-answer-plugin create my-plugin\n# \u6216\u4f7f\u7528\u8def\u5f84\u9009\u9879\nnpx create-answer-plugin create my-plugin --path /path/to/answer\n# \u9009\u62e9\uff1aStandard UI Plugin \u2192 Route\n# \u8f93\u5165\u8def\u7531\u8def\u5f84\uff1a/hello\n"})}),"\n",(0,l.jsxs)(e.p,{children:["\u63d2\u4ef6\u5c06\u521b\u5efa\u5728 ",(0,l.jsx)(e.code,{children:"ui/src/plugins/my-plugin/"}),"\uff08\u6ce8\u610f\uff1a",(0,l.jsx)(e.code,{children:"plugins"})," \u662f\u590d\u6570\u5f62\u5f0f\uff09\u3002"]}),"\n",(0,l.jsx)(e.h3,{id:"\u624b\u52a8\u521b\u5efa",children:"\u624b\u52a8\u521b\u5efa"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4f60\u66f4\u559c\u6b22\u624b\u52a8\u521b\u5efa\u63d2\u4ef6\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8fdb\u5165\u9879\u76ee\u7684 ",(0,l.jsx)(e.code,{children:"ui > src > plugins"})," \u76ee\u5f55\uff08\u6ce8\u610f\uff1a",(0,l.jsx)(e.code,{children:"plugins"})," \u662f\u590d\u6570\u5f62\u5f0f\uff09\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u521b\u5efa\u4f60\u7684\u63d2\u4ef6\u76ee\u5f55\u548c\u6587\u4ef6\uff0c\u9075\u5faa\u73b0\u6709\u63d2\u4ef6\u7684\u7ed3\u6784\u3002"}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"\u8fd0\u884c\u63d2\u4ef6",children:"\u8fd0\u884c\u63d2\u4ef6"}),"\n",(0,l.jsx)(e.h3,{id:"\u5b89\u88c5\u63d2\u4ef6\u81ea\u52a8\u5316---\u63a8\u8350",children:"\u5b89\u88c5\u63d2\u4ef6\uff08\u81ea\u52a8\u5316 - \u63a8\u8350\uff09"}),"\n",(0,l.jsxs)(e.p,{children:["\u5b89\u88c5\u63d2\u4ef6\u6700\u7b80\u5355\u7684\u65b9\u6cd5\u662f\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u7684 ",(0,l.jsx)(e.code,{children:"install"})," \u547d\u4ee4\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u5bfc\u822a\u5230\u4f60\u7684 Answer \u9879\u76ee\u6839\u76ee\u5f55\ncd /path/to/answer\n\n# \u5b89\u88c5\u7279\u5b9a\u63d2\u4ef6\uff08\u81ea\u52a8\u5904\u7406\u6ce8\u518c\uff09\nnpx create-answer-plugin install my-plugin\n# \u6216\nnpx answer-plugin install my-plugin\n# \u6216\u4f7f\u7528\u8def\u5f84\u9009\u9879\nnpx answer-plugin install my-plugin --path /path/to/answer\n\n# \u5b89\u88c5\u6240\u6709\u672a\u5b89\u88c5\u7684\u63d2\u4ef6\nnpx create-answer-plugin install\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879\uff1a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"plugins"}),"\uff08\u53ef\u9009\uff09\uff1a\u8981\u5b89\u88c5\u7684\u63d2\u4ef6\u540d\u79f0\uff08\u9ed8\u8ba4\u4e3a\u6240\u6709\u672a\u5b89\u88c5\u7684\u63d2\u4ef6\uff09"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"--path, -p"}),"\uff1aAnswer \u9879\u76ee\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\uff09"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"install"})," \u547d\u4ee4\u4f1a\u81ea\u52a8\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u2705 \u5728 ",(0,l.jsx)(e.code,{children:"cmd/answer/main.go"})," \u4e2d\u6dfb\u52a0\u63d2\u4ef6\u5bfc\u5165"]}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u5728 ",(0,l.jsx)(e.code,{children:"go.mod"})," \u4e2d\u6dfb\u52a0 ",(0,l.jsx)(e.code,{children:"replace"})," \u6307\u4ee4"]}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u8fd0\u884c ",(0,l.jsx)(e.code,{children:"go mod tidy"})]}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"go run ./cmd/answer/main.go i18n"})," \u5408\u5e76 i18n \u8d44\u6e90"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5217\u51fa\u63d2\u4ef6",children:"\u5217\u51fa\u63d2\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"\u5217\u51fa Answer \u9879\u76ee\u4e2d\u7684\u6240\u6709\u63d2\u4ef6\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u5217\u51fa\u6240\u6709\u63d2\u4ef6\nnpx create-answer-plugin list\n# \u6216\nnpx answer-plugin list\n# \u6216\u4f7f\u7528\u8def\u5f84\u9009\u9879\nnpx answer-plugin list /path/to/answer\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879\uff1a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"path"}),"\uff08\u53ef\u9009\uff09\uff1aAnswer \u9879\u76ee\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\uff09"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u5378\u8f7d\u63d2\u4ef6",children:"\u5378\u8f7d\u63d2\u4ef6"}),"\n",(0,l.jsx)(e.p,{children:"\u4ece Answer \u9879\u76ee\u4e2d\u5378\u8f7d\u63d2\u4ef6\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"# \u5378\u8f7d\u6240\u6709\u5df2\u5b89\u88c5\u7684\u63d2\u4ef6\nnpx create-answer-plugin uninstall\n# \u6216\nnpx answer-plugin uninstall\n\n# \u5378\u8f7d\u7279\u5b9a\u63d2\u4ef6\nnpx create-answer-plugin uninstall my-plugin another-plugin\n# \u6216\u4f7f\u7528\u8def\u5f84\u9009\u9879\nnpx answer-plugin uninstall my-plugin --path /path/to/answer\n"})}),"\n",(0,l.jsx)(e.p,{children:(0,l.jsx)(e.strong,{children:"\u9009\u9879\uff1a"})}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"plugins"}),"\uff08\u53ef\u9009\uff09\uff1a\u8981\u5378\u8f7d\u7684\u63d2\u4ef6\u540d\u79f0\uff08\u9ed8\u8ba4\u4e3a\u6240\u6709\u5df2\u5b89\u88c5\u7684\u63d2\u4ef6\uff09"]}),"\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.code,{children:"--path, -p"}),"\uff1aAnswer \u9879\u76ee\u8def\u5f84\uff08\u9ed8\u8ba4\u4e3a\u5f53\u524d\u76ee\u5f55\uff09"]}),"\n"]}),"\n",(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"uninstall"})," \u547d\u4ee4\u4f1a\u81ea\u52a8\uff1a"]}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsxs)(e.li,{children:["\u2705 \u4ece ",(0,l.jsx)(e.code,{children:"cmd/answer/main.go"})," \u4e2d\u79fb\u9664\u63d2\u4ef6\u5bfc\u5165"]}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u4ece ",(0,l.jsx)(e.code,{children:"go.mod"})," \u4e2d\u79fb\u9664 ",(0,l.jsx)(e.code,{children:"replace"})," \u6307\u4ee4"]}),"\n",(0,l.jsxs)(e.li,{children:["\u2705 \u8fd0\u884c ",(0,l.jsx)(e.code,{children:"go mod tidy"})]}),"\n",(0,l.jsx)(e.li,{children:"\u2705 \u66f4\u65b0 i18n \u8d44\u6e90"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u8fd0\u884c\u540e\u7aef\u63d2\u4ef6",children:"\u8fd0\u884c\u540e\u7aef\u63d2\u4ef6"}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350-1",children:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u5b89\u88c5\u63d2\u4ef6\uff08\u89c1\u4e0a\u6587\uff09\u3002"}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u524d\u7aef\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd ui\npnpm pre-install\npnpm build\ncd ..\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5408\u5e76 i18n \u8d44\u6e90\uff08\u5982\u679c\u672a\u81ea\u52a8\u5b8c\u6210\uff09\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go run ./cmd/answer/main.go i18n\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u9879\u76ee\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go run cmd/answer/main.go run -C ./answer-data\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u624b\u52a8\u5b89\u88c5",children:"\u624b\u52a8\u5b89\u88c5"}),"\n",(0,l.jsx)(e.p,{children:"\u5982\u679c\u4f60\u66f4\u559c\u6b22\u624b\u52a8\u5b89\u88c5\uff1a"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u9996\u5148\uff0c\u6784\u5efa\u524d\u7aef\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd ui\npnpm pre-install\npnpm build\ncd ..\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u5728 ",(0,l.jsx)(e.code,{children:"cmd > answer > main.go"})," \u6587\u4ef6\u4e2d\uff0c\u5bfc\u5165\u4f60\u7684\u63d2\u4ef6\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'import (\n  answercmd "github.com/apache/answer/cmd"\n\n  // Import the plugins\n  _ "github.com/apache/answer/ui/src/plugins/my-plugin"\n)\n'})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u4f7f\u7528 ",(0,l.jsx)(e.code,{children:"go mod edit"})," \u5c06\u63d2\u4ef6\u6dfb\u52a0\u5230 ",(0,l.jsx)(e.code,{children:"go.mod"})," \u6587\u4ef6\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go mod edit -replace=github.com/apache/answer/ui/src/plugins/my-plugin=./ui/src/plugins/my-plugin\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u66f4\u65b0\u4f9d\u8d56\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go mod tidy\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5408\u5e76 i18n \u8d44\u6e90\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go run ./cmd/answer/main.go i18n\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u542f\u52a8\u9879\u76ee\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"go run cmd/answer/main.go run -C ./answer-data\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"\u8fd0\u884c\u6807\u51c6-ui-\u63d2\u4ef6",children:"\u8fd0\u884c\u6807\u51c6 UI \u63d2\u4ef6"}),"\n",(0,l.jsx)(e.h4,{id:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u63a8\u8350-2",children:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\uff08\u63a8\u8350\uff09"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u4f7f\u7528\u811a\u624b\u67b6\u5de5\u5177\u5b89\u88c5\u63d2\u4ef6\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd /path/to/answer\nnpx create-answer-plugin install my-plugin\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8fdb\u5165 ",(0,l.jsx)(e.code,{children:"ui"})," \u76ee\u5f55\u5e76\u5b89\u88c5\u4f9d\u8d56\uff1a"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd ui\npnpm pre-install\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u524d\u7aef\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm build\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5f00\u53d1\u65f6\uff0c\u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm start\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5408\u5e76 i18n \u8d44\u6e90\uff08\u5982\u679c\u672a\u81ea\u52a8\u5b8c\u6210\uff09\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"cd ..\ngo run ./cmd/answer/main.go i18n\n"})}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h4,{id:"\u624b\u52a8\u5b89\u88c5-1",children:"\u624b\u52a8\u5b89\u88c5"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u8fdb\u5165 ",(0,l.jsx)(e.code,{children:"ui"})," \u76ee\u5f55\u3002"]}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5b89\u88c5\u4f9d\u8d56\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm pre-install\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u6784\u5efa\u524d\u7aef\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm build\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsx)(e.p,{children:"\u5f00\u53d1\u65f6\uff0c\u542f\u52a8\u5f00\u53d1\u670d\u52a1\u5668\uff1a"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-shell",children:"pnpm start\n"})}),"\n"]}),"\n",(0,l.jsxs)(e.li,{children:["\n",(0,l.jsxs)(e.p,{children:["\u53c2\u8003 ",(0,l.jsx)(e.a,{href:"/docs/development/plugins#%E8%BF%90%E8%A1%8C%E5%90%8E%E7%AB%AF%E6%8F%92%E4%BB%B6",children:"\u8fd0\u884c\u540e\u7aef\u63d2\u4ef6"})," \u90e8\u5206\uff0c\u624b\u52a8\u5c06\u63d2\u4ef6\u6dfb\u52a0\u5230\u9879\u76ee\u4e2d\uff08\u5728 ",(0,l.jsx)(e.code,{children:"main.go"})," \u4e2d\u5bfc\u5165\uff0c\u6dfb\u52a0 ",(0,l.jsx)(e.code,{children:"replace"})," \u6307\u4ee4\u7b49\uff09\u3002"]}),"\n"]}),"\n"]}),"\n",(0,l.jsx)(e.h2,{id:"backend-plugin-development",children:"Backend Plugin Development"}),"\n",(0,l.jsx)(e.h3,{id:"implement-the-base-interface",children:"Implement the Base interface"}),"\n",(0,l.jsxs)(e.p,{children:["The ",(0,l.jsx)(e.code,{children:"Base"})," interface contains basic information about the plugin and is used to display."]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"// Info presents the plugin information\ntype Info struct {\n    Name        Translator\n    SlugName    string\n    Description Translator\n    Author      string\n    Version     string\n    Link        string\n}\n\n// Base is the base plugin\ntype Base interface {\n    // Info returns the plugin information\n    Info() Info\n}\n"})}),"\n",(0,l.jsx)(e.admonition,{type:"caution",children:(0,l.jsxs)(e.p,{children:["The ",(0,l.jsx)(e.code,{children:"SlugName"})," of the plugin must be unique. Two plugins with the same ",(0,l.jsx)(e.code,{children:"SlugName"})," will panic when registering."]})}),"\n",(0,l.jsx)(e.h3,{id:"implement-the-function-interface",children:"Implement the function interface"}),"\n",(0,l.jsxs)(e.admonition,{type:"note",children:[(0,l.jsx)(e.p,{children:"Different plugin types require different interfaces of implementation."}),(0,l.jsxs)(e.p,{children:["For example, following is the ",(0,l.jsx)(e.code,{children:"Connector"})," plugin interface."]})]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"type Connector interface {\n    Base\n    \n    // ConnectorLogoSVG presents the logo in svg format\n    ConnectorLogoSVG() string\n    \n    // ConnectorName presents the name of the connector\n    // e.g. Facebook, Twitter, Instagram\n    ConnectorName() Translator\n    \n    // ConnectorSlugName presents the slug name of the connector\n    // Please use lowercase and hyphen as the separator\n    // e.g. facebook, twitter, instagram\n    ConnectorSlugName() string\n    \n    // ConnectorSender presents the sender of the connector\n    // It handles the start endpoint of the connector\n    // receiverURL is the whole URL of the receiver\n    ConnectorSender(ctx *GinContext, receiverURL string) (redirectURL string)\n    \n    // ConnectorReceiver presents the receiver of the connector\n    // It handles the callback endpoint of the connector, and returns the\n    ConnectorReceiver(ctx *GinContext, receiverURL string) (userInfo ExternalLoginUserInfo, err error)\n}\n"})}),"\n",(0,l.jsx)(e.admonition,{type:"tip",children:(0,l.jsxs)(e.p,{children:[(0,l.jsx)(e.code,{children:"Translator"})," is a struct for translation. Please refer to ",(0,l.jsx)(e.a,{href:"/docs/development/plugins/plugin-translation",children:"the documentation"})," for details."]})}),"\n",(0,l.jsx)(e.h3,{id:"implement-the-configuration-interface",children:"Implement the configuration interface"}),"\n",(0,l.jsxs)(e.p,{children:["For details on the description of each configuration item, please refer to ",(0,l.jsx)(e.a,{href:"/docs/development/plugins/plugin-config",children:"the documentation"}),"."]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:"type Config interface {\n    Base\n\n    // ConfigFields returns the list of config fields\n    ConfigFields() []ConfigField\n\n    // ConfigReceiver receives the config data, it calls when the config is saved or initialized.\n    // We recommend to unmarshal the data to a struct, and then use the struct to do something.\n    // The config is encoded in JSON format.\n    // It depends on the definition of ConfigFields.\n    ConfigReceiver(config []byte) error\n}\n"})}),"\n",(0,l.jsx)(e.h3,{id:"register-initialization-function",children:"Register initialization function"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-go",children:'import "github.com/apache/answer/plugin"\n\nfunc init() {\n    plugin.Register(&GitHubConnector{\n        Config: &GitHubConnectorConfig{},\n    })\n}\n'})}),"\n",(0,l.jsx)(e.h2,{id:"standard-ui-plugin-development",children:"Standard UI plugin Development"}),"\n",(0,l.jsx)(e.p,{children:"The default configuration is as follows:"}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"slug_name: <slug_name> \ntype: <type>\nversion: 0.0.1\nauthor: \n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-tsx",children:"import i18nConfig from './i18n';\nimport Component from './Component';\nimport info from './info.yaml';\n\nexport default {\n  info: {\n    slug_name: info.slug_name,\n    type: info.type, \n  },\n  i18nConfig,\n  component: Component, \n};\n"})}),"\n",(0,l.jsxs)(e.p,{children:["Among them, ",(0,l.jsx)(e.code,{children:"type"}),"\u3001",(0,l.jsx)(e.code,{children:"slug_name"})," and ",(0,l.jsx)(e.code,{children:"component"})," are required fields. ",(0,l.jsx)(e.code,{children:"i18nConfig"})," and ",(0,l.jsx)(e.code,{children:"hooks"})," are optional fields."]}),"\n",(0,l.jsx)(e.p,{children:"Currently the front end supports the following types of plugins:"}),"\n",(0,l.jsxs)(e.ul,{children:["\n",(0,l.jsx)(e.li,{children:"editor"}),"\n",(0,l.jsx)(e.li,{children:"route"}),"\n",(0,l.jsx)(e.li,{children:"captcha"}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"editor-plugin",children:"Editor plugin"}),"\n",(0,l.jsxs)(e.p,{children:["Refer to ",(0,l.jsx)(e.a,{href:"https://github.com/apache/answer-plugins/tree/main/editor-chart",children:"editor-chart"})," for details."]}),"\n",(0,l.jsx)(e.h3,{id:"route-plugin",children:"Route plugin"}),"\n",(0,l.jsxs)(e.p,{children:["The plugin configuration of the routing type adds the ",(0,l.jsx)(e.code,{children:"route"})," field to the configuration file."]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-yaml",children:"slug_name: <slug_name>\nroute: /<route>\ntype: route\nversion: 0.0.1\nauthor: \n\n"})}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-tsx",children:"import i18nConfig from './i18n';\nimport Component from './Component';\nimport info from './info.yaml';\n\nexport default {\n  info: {\n    slug_name: info.slug_name,\n    type: info.type,\n    route: info.route,\n  },\n  i18nConfig,\n  component: Component,\n};\n"})}),"\n",(0,l.jsx)(e.h3,{id:"captcha-plugin",children:"Captcha plugin"}),"\n",(0,l.jsxs)(e.p,{children:["Refer to ",(0,l.jsx)(e.a,{href:"https://github.com/apache/answer-plugins/tree/main/captcha-basic",children:"captcha-basic"})," for details."]}),"\n",(0,l.jsx)(e.h2,{id:"builtin-plugin-development",children:"Builtin plugin Development"}),"\n",(0,l.jsx)(e.p,{children:"It is not so different from React component, this plugin is more suitable for the following scenarios:"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsx)(e.li,{children:"There are complex business logics that cannot be separated from the code (such as Oauth)."}),"\n",(0,l.jsx)(e.li,{children:"Some back-end plugins require UI support for business purposes (such as Search)."}),"\n",(0,l.jsx)(e.li,{children:"This plugin has extremely low requirements for developers and requires no additional configuration work."}),"\n"]}),"\n",(0,l.jsx)(e.h3,{id:"how-to-develop-builtin-plugin",children:"How to develop builtin plugin"}),"\n",(0,l.jsxs)(e.ol,{children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Get familiar with the directory structure"}),". Go to the ",(0,l.jsx)(e.code,{children:"ui/src/plugins/builtin"})," directory and create a directory, such as Demo. Then refer to the existing plugins to create the necessary files to start development."]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-txt",children:"// ui/src/plugins/builtin\n.\n\u251c\u2500\u2500 ...\n\u251c\u2500\u2500 Demo\n      \u251c\u2500\u2500 i18n (language file)\n            \u251c\u2500\u2500 en_US.yaml (default language required)\n            \u251c\u2500\u2500 index.ts (required)\n            \u251c\u2500\u2500 zh_CN.ts (any language you want to provide)\n      \u251c\u2500\u2500 index.tsx (component required)\n      \u251c\u2500\u2500 info.yaml (plugin information required)\n      \u251c\u2500\u2500 services.ts (api)\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"2",children:["\n",(0,l.jsxs)(e.li,{children:["Export the plugins you have just defined in the plugins list file ",(0,l.jsx)(e.code,{children:"plugins/builtin/index.ts"})]}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:"import Demo from './Demo'\n\nexport default {\n  ...(exists plugins),\n  Demo,\n};\n"})}),"\n",(0,l.jsxs)(e.ol,{start:"3",children:["\n",(0,l.jsx)(e.li,{children:"Now you can use the PluginRender component to render the just-defined plugin where you want it!"}),"\n"]}),"\n",(0,l.jsx)(e.pre,{children:(0,l.jsx)(e.code,{className:"language-ts",children:'  <PluginRender\n    type="connector"\n    slug_name="third_party_connector"\n  />\n'})}),"\n",(0,l.jsxs)(e.ol,{start:"4",children:["\n",(0,l.jsxs)(e.li,{children:[(0,l.jsx)(e.strong,{children:"Publish plugin"}),": initiate the PR process normally and describe the plugin function and scope of influence in detail."]}),"\n"]})]})}function h(n={}){const{wrapper:e}={...(0,s.a)(),...n.components};return e?(0,l.jsx)(e,{...n,children:(0,l.jsx)(a,{...n})}):a(n)}},90887:(n,e,i)=>{i.d(e,{Z:()=>d,a:()=>t});var l=i(85170);const s={},r=l.createContext(s);function t(n){const e=l.useContext(r);return l.useMemo((function(){return"function"==typeof n?n(e):{...e,...n}}),[e,n])}function d(n){let e;return e=n.disableParentContext?"function"==typeof n.components?n.components(s):n.components||s:t(n.components),l.createElement(r.Provider,{value:e},n.children)}}}]);